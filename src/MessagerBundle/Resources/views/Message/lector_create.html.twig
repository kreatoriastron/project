{% extends "base.html.twig" %}
 {% block body %}
     {{ parent() }}
     <!-- BEGIN CONTENT -->
     <div class="page-content-wrapper">
         <div class="page-content">
             <!-- BEGIN PAGE HEAD -->
             <div class="page-head">
                 <!-- BEGIN PAGE TITLE -->
                 <div class="page-title">
                     <h1>Wiadomości <small>Lektorzy</small></h1>
                 </div>
                 <!-- END PAGE TITLE -->
             </div>
             <!-- END PAGE HEAD -->
             <!-- BEGIN PAGE BREADCRUMB -->
             <ul class="page-breadcrumb breadcrumb">
                 <li>
                     <a href="javascript:;">Wiadomości</a><i class="fa fa-circle"></i>
                 </li>
                 <li class="active">
                     Lektorzy
                 </li>
             </ul>
             <!-- END PAGE BREADCRUMB -->
             <!-- BEGIN PAGE CONTENT INNER -->
             <div id="mainBox">
                 <div class="col-md-12">
                     <div class="portlet box blue" id="form_wizard_1">
                         <div class="portlet-title">
                             <div class="caption">
                                 <i class="fa fa-gift"></i> Wysyłanie wiadomości - <span class="step-title">
								Krok 1 z 4 </span>
                             </div>
                         </div>
                         <div class="portlet-body form">
                             <form action="#" class="form-horizontal" id="submit_form" method="POST" novalidate="novalidate">
                                 <div class="form-wizard">
                                     <div class="form-body">
                                         <ul class="nav nav-pills nav-justified steps">
                                             <li class="active">
                                                 <a href="#tab1" data-toggle="tab" class="step" aria-expanded="true">
												<span class="number">
												1 </span>
                                                     <span class="desc">
												<i class="fa fa-check"></i> Wybieranie odbiorców </span>
                                                 </a>
                                             </li>
                                             <li>
                                                 <a href="#tab2" data-toggle="tab" class="step">
												<span class="number">
												2 </span>
                                                     <span class="desc">
												<i class="fa fa-check"></i> Redagowanie wiadomości </span>
                                                 </a>
                                             </li>
                                             <li>
                                                 <a href="#tab3" data-toggle="tab" class="step active">
												<span class="number">
												3 </span>
                                                     <span class="desc">
												<i class="fa fa-check"></i> Ustalanie parametrów </span>
                                                 </a>
                                             </li>
                                             <li>
                                                 <a href="#tab4" data-toggle="tab" class="step">
												<span class="number">
												4 </span>
                                                     <span class="desc">
												<i class="fa fa-check"></i> Potwierdzenie </span>
                                                 </a>
                                             </li>
                                         </ul>
                                         <div id="bar" class="progress progress-striped" role="progressbar">
                                             <div class="progress-bar progress-bar-success" style="width: 25%;">
                                             </div>
                                         </div>
                                         <div class="tab-content">
                                             <div class="alert alert-danger display-none">
                                                 <button class="close" data-dismiss="alert"></button>
                                                 Nie zaznaczono żadnego odbiorcy!
                                             </div>
                                             <div class="tab-pane active" id="tab1">
                                                 <h3 class="block">Wybierz odbiorców</h3>
                                                 <div id="mainBox">
                                                     <div class="row">
                                                         <div class="col-md-12">
                                                             <div class="portlet light">
                                                                 <div class="portlet-body">
                                                                     <div class="table-container" style="">

                                                                         <div id="datatable_ajax_wrapper" class="dataTables_wrapper dataTables_extended_wrapper no-footer">
                                                                             <td rowspan="1" colspan="1">
                                                                                 <div class="margin-bottom-5">
                                                                                     <button class="btn btn-sm yellow filter-submit margin-bottom" id="search"><i class="fa fa-search"></i> Szukaj</button>
                                                                                 </div>
                                                                             </td>

                                                                             <div class="table-scrollable"><table class="table table-striped table-bordered table-hover dataTable no-footer" id="datatable_ajax" aria-describedby="datatable_ajax_info" role="grid">
                                                                                     <thead>
                                                                                     <tr role="row" class="heading">
                                                                                         <th width="2%" class="sorting_disabled" rowspan="1" colspan="1">
                                                                                             <div class="form-check">
                                                                                                 <input class="form-check-input group-checkable" type="checkbox">
                                                                                             </div>
                                                                                         </th>
                                                                                         <th width="5%" class="sorting" tabindex="0" aria-controls="datatable_ajax" rowspan="1" colspan="1">
                                                                                             Imię
                                                                                         </th>
                                                                                         <th width="15%" class="sorting" tabindex="0" aria-controls="datatable_ajax" rowspan="1" colspan="1">
                                                                                             Nazwisko
                                                                                         </th>
                                                                                         <th width="15%" class="sorting" tabindex="0" aria-controls="datatable_ajax" rowspan="1" colspan="1">
                                                                                             Email
                                                                                         </th>
                                                                                         <th width="10%" class="sorting" tabindex="0" aria-controls="datatable_ajax" rowspan="1" colspan="1">
                                                                                             Telefon
                                                                                         </th>
                                                                                         <th width="10%" class="sorting" tabindex="0" aria-controls="datatable_ajax" rowspan="1" colspan="1">
                                                                                             Dr
                                                                                         </th>
                                                                                         <th width="10%" class="sorting" tabindex="0" aria-controls="datatable_ajax" rowspan="1" colspan="1">
                                                                                             Szkoła
                                                                                         </th>
                                                                                         <th width="10%" class="sorting" tabindex="0" aria-controls="datatable_ajax" rowspan="1" colspan="1">
                                                                                             Grupa
                                                                                         </th>
                                                                                     </tr>
                                                                                     <tr role="row" class="filter"><td rowspan="1" colspan="1">
                                                                                         </td><td rowspan="1" colspan="1">
                                                                                             <input type="text" class="form-control form-filter input-sm" name="name">
                                                                                         </td>
                                                                                         <td rowspan="1" colspan="1">
                                                                                             <input type="text" class="form-control form-filter input-sm" name="surname">
                                                                                         </td>
                                                                                         <td rowspan="1" colspan="1">
                                                                                             <input type="text" class="form-control form-filter input-sm" name="email">
                                                                                         </td>
                                                                                         <td rowspan="1" colspan="1">
                                                                                             <input type="text" class="form-control form-filter input-sm" name="phone">
                                                                                         </td>
                                                                                         <td rowspan="1" colspan="1">
                                                                                             <input type="text" class="form-control form-filter input-sm" name="dr">
                                                                                         </td>
                                                                                         <td rowspan="1" colspan="1">
                                                                                             <input type="text" class="form-control form-filter input-sm" name="school">
                                                                                         </td>
                                                                                         <td rowspan="1" colspan="1">
                                                                                             <input type="text" class="form-control form-filter input-sm" name="group">
                                                                                         </td>
                                                                                     </tr>
                                                                                     </thead>
                                                                                     <tbody>

                                                                                     {% for user in users %}
                                                                                         <tr>
                                                                                             <td><input type="checkbox" name="selectedUser" id="selectedUser" value="{{ user.id }}"></td>
                                                                                             <td>{{ user.name }}</td>
                                                                                             <td>{{ user.surname }}</td>
                                                                                             <td>{{ user.email }}</td>
                                                                                             <td>{{ user.phone }}</td>
                                                                                             <td>{{ user.dr }}</td>
                                                                                             <td>{{ user.school }}</td>
                                                                                             <td>{{ user.groups }}</td>
                                                                                         </tr>
                                                                                     {% endfor %}
                                                                                     </tbody>
                                                                                 </table>
                                                                             </div>
                                                                         </div>
                                                                     </div>
                                                                 </div>
                                                                 <!-- End: life time stats -->
                                                             </div>
                                                         </div>
                                                     </div>
                                                 </div>
                                             </div>
                                             <div class="tab-pane" id="tab2">
                                                 <h3 class="block">Redaguj treść</h3>
                                                 <div class="form-body">
                                                     <div class="form-group">
                                                         <label class="control-label col-md-3">Treść</label>
                                                         <div class="col-md-9">
                                                             <textarea id="content" name="content" rows="8" style="width: 70%" class="form-control"></textarea>
                                                         </div>
                                                     </div>
                                                 </div>
                                             </div>
                                             <div class="tab-pane" id="tab3">
                                             </div>
                                             <div class="tab-pane" id="tab4">
                                             </div>
                                         </div>
                                     </div>
                                     <div class="form-actions">
                                         <div class="row">
                                             <div class="col-md-offset-3 col-md-9">
                                                 <a href="javascript:;" class="btn default button-previous disabled" style="display: none;">
                                                     <i class="m-icon-swapleft"></i> Cofnij </a>
                                                 <a href="javascript:;" class="btn blue button-next">
                                                     Dalej <i class="m-icon-swapright m-icon-white"></i>
                                                 </a>
                                                 <a href="javascript:;" class="btn green button-submit" style="display: none;">
                                                     Wyślij <i class="m-icon-swapright m-icon-white"></i>
                                                 </a>
                                             </div>
                                         </div>
                                     </div>
                                 </div>
                             </form>
                         </div>
                     </div>
                 </div>
             </div>
         </div>
     </div>
 {% endblock %}
 {%  block stylesheets %}
     {{  parent () }}
 {% endblock %}
 {% block javascripts %}
     {{  parent() }}
     <script type="text/javascript" src="{{ asset('assets/global/plugins/select2/select2.min.js') }}"></script>
     <script src="{{ asset('assets/global/plugins/jquery-validation/js/jquery.validate.min.js') }}" type="text/javascript"></script>
     <script src="{{ asset('assets/global/plugins/jquery-validation/js/additional-methods.min.js') }}" type="text/javascript"></script>

     <script type="text/javascript" src="{{ asset('assets/global/plugins/select2/select2.min.js') }}"></script>
     <script type="text/javascript" src="{{ asset('assets/admin/pages/scripts/form-wizard.js') }}"></script>
     <script type="text/javascript" src="{{ asset('assets/global/plugins/bootstrap-wizard/jquery.bootstrap.wizard.min.js') }}"></script>
     <script>
         $(document).ready(function(){
             FormWizard.init('{{ path('save_message') }}');
             $('#search').click(function() {
                 $.ajax({
                     type: "POST",
                     url: '{{ path('messager_filter_lector') }}',
                     data: $( ".form-filter" ).serialize(),
                     success: function ($data) {
                         var response= JSON.parse($data);
                         $('#datatable_ajax > tbody tr').remove();
                         $.each(response, function(i, row) {
                             $('<tr>').append(
                                     $('<td>').html('<input type="checkbox" id="selectedUser" value="' + row.id + '">'),
                                     $('<td>').text(row.name),
                                     $('<td>').text(row.surname),
                                     $('<td>').text(row.email),
                                     $('<td>').text(row.phone),
                                     $('<td>').text(row.dr),
                                     $('<td>').text(row.school),
                                     $('<td>').text(row.groups)
                             ).appendTo('#datatable_ajax > tbody');
                         });

                     }
                 });
             });

             $("#mainBox").on("click",".group-checkable", function(){
                 if($(this).prop('checked')) {
                     $('input[type="checkbox"]').prop('checked', true).change();
                 } else {
                     $('input[type="checkbox"]').prop('checked', false).change();
                 }
             });
         })
     </script>
 {% endblock %}

